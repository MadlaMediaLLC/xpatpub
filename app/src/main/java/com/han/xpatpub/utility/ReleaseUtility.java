package com.han.xpatpub.utility;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.Signature;
import android.util.Log;

public class ReleaseUtility {

	private static final Signature SIG_RELEASE = new Signature(
			"308203933082027ba00302010202046b0f0e62300d06092a864886f70d01010b0500307a310b3009060355040613025553310b3009060355040813024d4e311530130603550407130c4564656e205072616972696531183016060355040a130f4d61646c61204d65646961204c4c433110300e060355040b130778706174707562311b3019060355040313125368616e6e6f6e20426f726e747261676572301e170d3134303831313230333330335a170d3339303830353230333330335a307a310b3009060355040613025553310b3009060355040813024d4e311530130603550407130c4564656e205072616972696531183016060355040a130f4d61646c61204d65646961204c4c433110300e060355040b130778706174707562311b3019060355040313125368616e6e6f6e20426f726e74726167657230820122300d06092a864886f70d01010105000382010f003082010a02820101008264641410359beee17de6d57751d223ca272470992043012336274cab8629fe33ed1051bc32d1b42cc8310f9009a5cf639f15fd9197374f7cd066c9511a37d49bb0470d92c57925b9a88ea394ab735541a87fd3bda93e7577f92aff238c405a25bcb8b67dc61b9d72158f00e2096b5947338183d05759718bfcd08edd52b339a59219e1afd78fb5470b955861b6314d24b1ba74cea2809aedf3cd36ec3475a8ba639b0fc51b31c44b782d001a49274c4ba1d34f8e07ba8d1bd866e93e75b040091a325f021883fa871f10a5dfbc6910fb2122abb1df681a0eab0fa967a6f9f2e9aaf5dec5e47fa781eea60cae152681799fdba5a775b0b852d0a5626824f9370203010001a321301f301d0603551d0e04160414e93fb718ea2712128b8e3890f60b36df3f54e75a300d06092a864886f70d01010b050003820101007ff3a275f3640fc6f08725f6d99cb4c137c06aefd44a42616e78607c70bfe7a36c251cb2c15616ffe3566f8834df70554c4a9fdac45c946b5f13bdc38475b299af57022ab46544d4ef9d6c9d887943e338c6ee4b7505ad73716b045d0090f56db6e384e4864e09e16ca4d8500fa960c19284d627ef5d9ea7ebd5849c140623ab8c1507c8b3f030e5fb61949a083c90783db1cf1124f2c0539aed905feb4692ae8db67b850de4ac2c262e12fdee1663b8e46f5e07c22d6883441b6981c9687ecd25b7f56bc9ee5d44e225b6973cbbb76653bde0dfcb3f4347111c87dd096e62d55c0e14e0e2a5a8045c79922a208e9a20416711cb0b89c81177042b258632b12f");

	public static boolean isRelease(Context context) {
		try {			
			Log.d("tag", "msg");
			PackageManager pm = context.getPackageManager();
			PackageInfo pi = pm.getPackageInfo(context.getPackageName(),
					PackageManager.GET_SIGNATURES);
			for (Signature sig : pi.signatures) {
//				Log.i(ReleaseUtility.class.getName(), "Signature = " + sig.toCharsString());
				if (sig.equals(SIG_RELEASE)) {
					return true;
				}
			}
			
		} catch (Exception e) {
			Log.w("Exception thrown when detecting if app is signed by a release keystore.",
					e);

			// Return true if we can't figure it out, just to play it safe
			return true;
		}

		return false;
	}
}
